# Go 语言项目开发规范

## 一、Go 版本与语法

- 基于 Go 1.25.x 版本开发
- 不引入低于 1.25.x 主版本的语法或标准库特性
- 禁用该版本已废弃或者不推荐的语法特性

## 二、依赖管理

- 优先使用 Go 官方推荐的标准库来实现功能
- 按提示词或注释明确的依赖直接引入使用
- 引入未注明的第三方依赖时，通过 `go mod` 管理
- 在项目根目录的 `README.md` 中注明每个第三方依赖：
  - 依赖名称及版本
  - 引入的具体业务用途
  - 选择该依赖的核心理由（如标准库无对应功能、性能优势等）

## 三、错误处理

1. **关键错误处理**

   - 禁止使用下划线 `_` 忽略关键错误
   - 所有错误必须通过 `if err != nil` 明确处理或向上传递

2. **错误信息规范**

   - 使用 `fmt.Errorf("场景描述: %w", err)` 格式包装原始错误
   - 确保上层调用方可通过 `errors.Is/errors.As` 追溯完整错误链

3. **语义化错误**
   - 复杂业务场景下，使用 `errors.New` 定义语义化错误变量
   - 或通过 `errors.Join` 合并多错误
   - 禁止直接返回字符串字面量错误

## 四、代码风格

1. **命名规范**

   - 变量/函数名使用小驼峰式（camelCase）
   - 常量使用全大写下划线分隔式（UPPER_SNAKE_CASE）
   - 包名使用小写单字或简短组合词（避免复数形式）

2. **格式规范**

   - 遵循 Go 官方代码风格（参考 `go fmt/golint` 规范）
   - 遵循 Go 语言代码格式规范，包括缩进、换行、括号位置等

3. **代码组织**

   - 保持包内逻辑清晰
   - 避免过大函数（建议单函数代码量不超过 80 行）
   - 公共函数需添加规范注释

4. **函数声明**

   - 在 Go 语言项目开发中声明函数时，建议优先采用命名返回值形式。
   - 若使用命名返回值，需在函数顶部为返回值显式赋空值。

## 五、关键流程错误处理

- 对 I/O 操作、网络请求、配置解析等关键流程的错误，进行完整上下文包装
- 确保错误日志可追溯至具体操作场景（如 `fmt.Errorf("读取配置文件 %s 失败: %w", filePath, err)`）
