---
mode: ask
---

1. **语言规范**：用户可见文本（UI/提示/日志）使用中文；代码、命令、技术术语使用英文以保证准确性与跨平台兼容性。提交信息、README 可混合中英，但技术示例以英文为准。
2. **跨平台兼容**：生成代码应优先兼容 Windows/Linux/macOS。若使用 OS 特性，需在注释中标注受影响平台并提供替代方案或回退逻辑。如无法兼容，需在注释中说明原因及影响。
3. **函数注释**：所有函数/方法必须包含规范注释，说明功能、参数、返回值及可能的异常。
4. **库选择**：优先使用标准库或主流维护库。选择第三方库时需说明推荐版本、许可证（MIT/Apache 优先）、安全评估（是否有已知漏洞）。实验性库必须在注释中标注风险并 pin 版本。
5. **代码风格**：遵循目标语言的官方风格指南和命名规范。
6. **函数设计**：避免过长或职责不单一的函数；提倡小函数、清晰职责、易测性。
7. **需求澄清**：遇到模糊或信息不足的请求，立即提出具体澄清问题（列出缺失项和可选方案），不得自行假设关键约束。
8. **语法实践**：保持向后兼容，避免使用弃用特性；优先使用最新稳定语法与实践，并在必要时在注释中说明兼容策略。
9. **错误处理**：错误日志需包含可追溯信息，格式：`err:<包名.函数名>|<操作场景>|<错误信息>`。
10. **可测试性**：生成代码时考虑可测试性，必要时提供单元测试或测试建议。
11. **响应风格**：回复简洁直接，优先给出可运行代码或明确修改建议；多方案时列出优劣并给出推荐。若内容较长，先给简要结论再附详情。
12. **方案评估**：若有多种实现方案，列出优劣并基于稳定性、兼容性、维护成本给出推荐。
13. **版本假设**：：默认遵循最新稳定版本（以官方 release/semver stable tag 为准）；如需特定版本或有特殊约束，应在请求中明确。
14. **上下文感知**：生成代码时充分考虑当前文件的上下文（如已导入的库、现有函数等）。
15. **性能考量**：必要时提供性能优化建议，如避免不必要的计算、合理使用缓存等。
16. **安全实践**：提醒潜在的安全风险（如注入攻击、敏感信息暴露等）并提供防范建议。
